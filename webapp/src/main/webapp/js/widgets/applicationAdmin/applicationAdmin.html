
<uib-accordion close-others="false"> <uib-accordion-group
  is-open="true"> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right" uib-tooltip="List of the map projects.">
    Map Projects </span>
</h5>
</uib-accordion-heading>

<table class="table pure-table" style="width: 100%; margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 22%;">Name / Source / Destination</th>
      <th style="width: 17%;">Ref Set</th>
      <th style="width: 16%;">Flags</th>
      <th style="width: 17%;"></th>
      <th style="width: 20%;">Types</th>
      <th style="width: 6%;"></th>
      <th style="width: 2%;"></th>
    </tr>
  </thead>
  <tbody ng-repeat="project in mapProjects | orderBy: 'name'"
    style="border: 2px solid #ccc;">
    <tr>
      <td>
        <input tooltip-placement="top" uib-tooltip="Project Name"
          ng-model="project.name" ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;"></input> <select
          tooltip-placement="top" uib-tooltip="Source Terminology and Version"
          ng-init="project.sourceTerminologyAndVersion = getSourceVersion(project)"
          ng-model="project.sourceTerminologyAndVersion"
          ng-options="item for item in terminologyVersionPairs"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
        </select> <select tooltip-placement="top"
          uib-tooltip="Destination Terminology and Version"
          ng-init="project.destinationTerminologyAndVersion = getDestinationVersion(project)"
          ng-model="project.destinationTerminologyAndVersion"
          ng-options="item for item in terminologyVersionPairs"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
        </select> Team Based: <input type="checkbox" ng-model="project.teamBased"
          ng-change="setEditingPerformed(project)">
      </td>
      <td>
        Team Based: <input tooltip-placement="top" uib-tooltip="Team Based"
          ng-model="project.refSetId" ng-change="setEditingPerformed(project)"
          style="width: 100%;"></input>
        <div tooltip-placement="top" uib-tooltip="Ref Set Name">{{project.refSetName}}</div>
      </td>
      <td>
        <table>
          <tbody>
            <tr>
              <td>Published:</td>
              <td>
                <select ng-model="project.published"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td style="padding-top: 5px; padding-bottom: 5px;">Rule
                Based:</td>
              <td>
                <select ng-model="project.ruleBased"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td>Group Structure:</td>
              <td>
                <select ng-model="project.groupStructure"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td>Public:</td>
              <td>
                <select ng-model="project.public"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
      <td>
        <table>
          <tbody>
            <tr>
              <td style="padding-top: 5px; padding-bottom: 5px;">Scope
                Desc:</td>
              <td>
                <select ng-model="project.scopeDescendantsFlag"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td>Scope Excl Desc:</td>
              <td>
                <select ng-model="project.scopeExcludedDescendantsFlag"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td>Propagated:</td>
              <td>
                <select ng-model="project.propagatedFlag"
                  ng-change="setEditingPerformed(project)"
                  ng-options="item for item in [true, false]">
                </select>
              </td>
            </tr>
            <tr>
              <td>Propagation Threshold:</td>
              <td>
                <input ng-model="project.propagationDescendantThreshold"
                  ng-change="setEditingPerformed(project)" style="width: 85%;"></input>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
      <td>
        <select tooltip-placement="top" uib-tooltip="Map Type"
          ng-init="project.mapRefsetPattern=getMapType(project)"
          ng-model="project.mapRefsetPattern"
          ng-options="item for item in allowableMapTypes"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
        </select> <select tooltip-placement="top" uib-tooltip="Workflow Type"
          ng-init="project.workflowType=getWorkflowType(project)"
          ng-model="project.workflowType"
          ng-options="item for item in allowableWorkflowTypes"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
        </select> <select tooltip-placement="top" uib-tooltip="Map Relation Style"
          ng-init="project.mapRelationStyle=getMapRelationStyle(project)"
          ng-model="project.mapRelationStyle"
          ng-options="item for item in allowableMapRelationStyles"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
        </select> <input tooltip-placement="top"
          uib-tooltip="Project Specific Algorithm Handler"
          ng-model="project.projectSpecificAlgorithmHandlerClass"
          ng-change="setEditingPerformed(project)"
          style="margin-bottom: 5px; width: 100%;">
      </td>
      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updateMapProjectFromList(project)"
          ng-show="isComponentChanged(project) == true">Save</button>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete project">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deleteMapProject(project)"></i>
        </div>
      </td>
    </tr>

  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedProjects()"
  ng-show="projectInEditingPerformed() == true">Cancel Unsaved Edits</button>


<div>
  <div style="margin-top: 15px;">
    <b>Create New Map Project</b>
  </div>

  <table class="table pure-table">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Map Project Name</td>
        <td>
          <input id="newMapProjectName" type="text" ng-model="newMapProjectName">
        </td>
      </tr>
      <tr>
        <td>Source Terminology and Version</td>
        <td>
          <select ng-model="newMapProjectSourceVersion"
            ng-options="item for item in terminologyVersionPairs">
          </select>
        </td>
      </tr>
      <tr>
        <td>Destination Terminology and Version</td>
        <td>
          <select ng-model="newMapProjectDestinationVersion"
            ng-options="item for item in terminologyVersionPairs">
          </select>
        </td>
      </tr>
      <tr>
        <td>Ref Set Id</td>
        <td>
          <input id="newMapProjectRefSetId" type="text"
            ng-model="newMapProjectRefSetId">
      <tr>
        <td>Published</td>
        <td>
          <select ng-model="newMapProjectPublished"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Rule Based</td>
        <td>
          <select ng-model="newMapProjectRuleBased"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Group Structure</td>
        <td>
          <select ng-model="newMapProjectGroupStructure"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Public</td>
        <td>
          <select ng-model="newMapProjectPublic"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Scope Descendants</td>
        <td>
          <select ng-model="newMapProjectScopeDescendantsFlag"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Scope Excluded Descendants</td>
        <td>
          <select ng-model="newMapProjectScopeExcludedDescendantsFlag"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Propagated</td>
        <td>
          <select ng-model="newMapProjectPropagationFlag"
            ng-options="item for item in [true, false]"
            ng-change="newMapProjectPropagationThreshold = 0">
          </select>
        </td>
      </tr>
      <tr>
        <td>Propagation Threshold</td>
        <td>
          <input id="newMapProjectPropagationThreshold" type="text"
            ng-init="newMapProjectPropagationThreshold = 0"
            ng-model="newMapProjectPropagationThreshold">
        </td>
      </tr>

      <tr>
        <td>Map Type</td>
        <td>
          <select ng-model="newMapProjectMapType"
            ng-options="item for item in allowableMapTypes">
          </select>
        </td>
      </tr>
      <tr>
        <td>Workflow Type</td>
        <td>
          <select ng-model="newWorkflowType"
            ng-options="item for item in allowableWorkflowTypes">
          </select>
        </td>
      </tr>
      <tr>
        <td>Map Relation Style</td>
        <td>
          <select ng-model="newMapRelationStyle"
            ng-options="item for item in allowableMapRelationStyles">
          </select>
        </td>
      </tr>
      <tr>
        <td>Project Specific Algorithm Handler</td>
        <td>
          <input style="width: 550px;" ng-model="newHandler"
            value="defaultProjectSpecificAlgorithmHandler">
        </td>
      </tr>

      <tr>
        <td>
          <button class="btn btn-xs btn-primary"
            ng-click="submitNewMapProject(newMapProjectName, newMapProjectSourceVersion, 
        newMapProjectDestinationVersion, newMapProjectRefSetId, newMapProjectPublished, 
        newMapProjectRuleBased, newMapProjectGroupStructure, newMapProjectPublic, 
        newMapProjectScopeDescendantsFlag, newMapProjectScopeExcludedDescendantsFlag, 
        newMapProjectMapType, newWorkflowType, newMapRelationStyle, newHandler, 
        newMapProjectPropagationFlag,
        newMapProjectPropagationThreshold); 
          newMapProjectName = ''; newMapProjectRefSetId = ''; newHandler = '';
          newMapProjectSourceVersion = ''; newMapProjectDestinationVersion = '';
          newMapProjectPropagationThreshold = '0'; newMapProjectPublished = false; 
          newMapProjectRuleBased = false; newMapProjectGroupStructure = false; 
          newMapProjectPublic = false; newMapProjectScopeDescendantsFlag = false; 
          newMapProjectScopeExcludedDescendantsFlag = false; newMapProjectPropagationFlag = false; newHandler = defaultProjectSpecificAlgorithmHandler;">Submit</button>
        </td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>

</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right" uib-tooltip="List of the map users.">
    Map Users </span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;" direction-links="false"
  boundary-links="true" total-items="pagedUserCount" items-per-page="pageSize"
  ng-model="pageUser" ng-change="getPagedUsers(pageUser, userFilter)">
</uib-pagination> <span>
  <input id="userSearch" type="text" ng-model="userFilter"
    ng-change="getPagedUsers(1, userFilter)">
  <button ng-click="resetUserFilter()" class="btn btn-xs btn-warning">Reset</button>
</span>

<table class="table pure-table" style="width: 100%; margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 10%;">User Name</th>
      <th style="width: 20%;">Full Name</th>
      <th style="width: 30%;">Email</th>
      <th style="width: 25%;">Team</th>
      <th style="width: 9%;"><div tooltip-placement="top"
          uib-tooltip="Indicates the administrative permissions this user has for the Mapping Tool Application (i.e. access to this page)">Application
          Role</div></th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>
  <tbody ng-repeat="user in pagedUser | orderBy: 'name'"
    style="border: 2px solid #ccc;">

    <tr>
      <td>
        <input ng-model="user.userName" ng-change="setEditingPerformed(user)"
          style="width: 100%;">
      </td>
      <td>
        <input ng-model="user.name" ng-change="setEditingPerformed(user)"
          style="width: 100%;">
      </td>
      <td>
        <input ng-model="user.email" ng-change="setEditingPerformed(user)"
          style="width: 100%;">
      </td>
      <td>
        <input ng-model="user.team" ng-change="setEditingPerformed(user)"
          style="width: 100%;">
      </td>
      <td>
        <select ng-model="user.applicationRole"
          ng-change="setEditingPerformed(user)"
          ng-options="item for item in userApplicationRoles">
        </select>
      </td>

      <td>
        <button class="btn btn-xs btn-primary" ng-click="updateUser(user)"
          ng-show="isComponentChanged(user) == true">Save</button>
      </td>
      <td>
        <div tooltip-placement="top" title="Delete user">
          <i class="noul glyphicon glyphicon-remove" ng-click="deleteUser(user)"></i>
        </div>
      </td>
    </tr>

  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedUsers()"
  ng-show="userInEditingPerformed() == true">Cancel Unsaved Edits</button>

<div>
  <div style="margin-top: 15px;">
    <b>Create New Map User</b>
  </div>
  <table class="table pure-table">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Login Name</td>
        <td>
          <input id="newUserName" type="text" ng-model="newUserName">
        </td>
      </tr>
      <tr>
        <td>Full Name</td>
        <td>
          <input id="newUserFullName" type="text" ng-model="newUserFullName">
        </td>
      </tr>
      <tr>
        <td>Email</td>
        <td>
          <input id="newUserEmail" type="text" ng-model="newUserEmail">
        </td>
      </tr>
      <tr>
        <td>Application Role</td>
        <td>
          <select ng-model="newUserApplicationRole"
            ng-options="item for item in userApplicationRoles">
          </select>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn btn-xs btn-primary"
    ng-click="submitNewMapUser(newUserName, newUserFullName, newUserEmail, newUserApplicationRole); 
          newUserName = ''; newUserFullName = ''; newUserEmail = ''; newUserApplicationRole = null; ">Submit</button>
</div>
</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right" uib-tooltip="List of the map advices.">
    Map Advices </span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;" direction-links="false"
  boundary-links="true" total-items="pagedAdviceCount" items-per-page="pageSize"
  ng-model="pageAdvice" ng-change="getPagedAdvices(pageAdvice, adviceFilter)"></uib-pagination>
<span>
  <input id="adviceSearch" type="text" ng-model="adviceFilter"
    ng-change="getPagedAdvices(1, adviceFilter)">
  <button xs class="btn btn-xs btn-warning" ng-click="resetAdviceFilter()">Reset</button>
</span>

<table class="table pure-table" style="width: 100%; margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 40%;">Advice</th>
      <th style="width: 40%;">Detail</th>
      <th style="width: 7%;"><div tooltip-placement="top"
          uib-tooltip="Whether this advice can be applied to entries with no target">Allowable
          for Null Target</div>
      <th style="width: 7%;"><div tooltip-placement="top"
          uib-tooltip="If true, this advice is applied automatically and cannot be assigned directly by the user">Computed</div>
      </th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>
  <tbody ng-repeat="advice in pagedAdvice | orderBy: 'name'"
    style="border: 2px solid #ccc;">

    <tr>
      <td>
        <input ng-model="advice.name" ng-change="setEditingPerformed(advice)"
          style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="advice.detail" ng-change="setEditingPerformed(advice)"
          style="width: 100%;"></input>
      </td>
      <td>
        <select ng-model="advice.isAllowableForNullTarget"
          ng-change="setEditingPerformed(advice)"
          ng-options="item for item in [true, false]">
        </select>
      </td>
      <td>
        <select ng-model="advice.isComputed"
          ng-change="setEditingPerformed(advice)"
          ng-options="item for item in [true, false]">
        </select>
      </td>

      <td>
        <button class="btn btn-xs btn-primary" ng-click="updateAdvice(advice)"
          ng-show="isComponentChanged(advice) == true">Save</button>
      </td>
      <td>
        <div tooltip-placement="top" title="Delete advice">
          <i class="noul glyphicon glyphicon-remove" ng-click="deleteAdvice(advice)"></i>
        </div>
      </td>
    </tr>

  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedAdvices()"
  ng-show="adviceInEditingPerformed() == true">Cancel Unsaved Edits</button>

<div>
  <div style="margin-top: 15px;">
    <b>Create New Map Advice</b>
  </div>

  <table class="table pure-table">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Advice Name</td>
        <td>
          <input id="newAdviceName" type="text" ng-model="newAdviceName">
        </td>
      </tr>
      <tr>
        <td>Advice Detail</td>
        <td>
          <input id="newAdviceDetail" type="text" ng-model="newAdviceDetail">
        </td>
      </tr>
      <tr>
        <td>Allowable for Null Target</td>
        <td>
          <select ng-model="newAllowableForNullTarget"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Is Computed</td>
        <td>
          <select ng-model="newIsComputed"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn btn-xs btn-primary"
    ng-click="submitNewMapAdvice(newAdviceName, newAdviceDetail, newAllowableForNullTarget, newIsComputed); 
          newAdviceName = ''; newAdviceDetail = ''; newAllowableForNullTarget = false; newIsComputed = false; ">Submit</button>
</div>

</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right"
    uib-tooltip="List of the map relations for the application."> Map
    Relations </span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;"
  ng-show="mapRelations.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedRelationCount"
  items-per-page="pageSize" ng-model="pageRelation"
  ng-change="getPagedRelations(pageRelation, relationFilter)">
</uib-pagination>
<div>
  <input type="text" ng-model="relationFilter"
    ng-change="getPagedRelations(1, relationFilter)">
  <button class="btn btn-xs btn-warning" ng-click="resetRelationFilter()">Reset</button>
</div>

<table class="table pure-table" style="width: 100%; margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 12%;">Id</th>
      <th style="width: 25%;"><div tooltip-placement="top"
          uib-tooltip="Short code abbreviation for this relation, if applicable">Code</div>
      <th style="width: 43%;"><div tooltip-placement="top"
          uib-tooltip="The full name of this map relation">Name</div>
      <th style="width: 7%;"><div tooltip-placement="top"
          uib-tooltip="Whether this relation can be applied to entries with no target">Allowable
          for Null Target</div>
      <th style="width: 7%;"><div tooltip-placement="top"
          uib-tooltip="If true, this relation is applied automatically and cannot be assigned directly by the user">Computed</div>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>
  <tbody ng-repeat="relation in pagedRelation | orderBy: 'name'"
    style="border: 2px solid #ccc;">
    <tr>
      <td>
        <input ng-model="relation.terminologyId"
          ng-change="setEditingPerformed(relation)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="relation.abbreviation"
          ng-change="setEditingPerformed(relation)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="relation.name"
          ng-change="setEditingPerformed(relation)" style="width: 100%;"></input>
      </td>
      <td>
        <select ng-model="relation.isAllowableForNullTarget"
          ng-change="setEditingPerformed(relation)"
          ng-options="item for item in [true, false]">
        </select>
      </td>
      <td>
        <select ng-model="relation.isComputed"
          ng-change="setEditingPerformed(relation)"
          ng-options="item for item in [true, false]">
        </select>
      </td>
      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updateRelation(relation)"
          ng-show="isComponentChanged(relation) == true">Save</button>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete relation">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deleteRelation(relation)"></i>
        </div>
      </td>
    </tr>

  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedRelations()"
  ng-show="relationInEditingPerformed() == true">Cancel Unsaved Edits</button>


<div>
  <div style="margin-top: 15px;">
    <b>Create New Map Relation</b>
  </div>

  <table class="table pure-table">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Relation Terminology Id</td>
        <td>
          <input id="newRelationTerminologyId" type="text"
            ng-model="newRelationTerminologyId">
        </td>
      </tr>
      <tr>
        <td>Relation Code</td>
        <td>
          <input id="newRelationAbbreviation" type="text"
            ng-model="newRelationAbbreviation">
        </td>
      </tr>
      <tr>
        <td>Relation Name</td>
        <td>
          <input id="newRelationName" type="text" ng-model="newRelationName">
        </td>
      </tr>
      <tr>
        <td>Allowable for Null Target</td>
        <td>
          <select ng-model="newRelationAllowableForNullTarget"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Is Computed</td>
        <td>
          <select ng-model="newRelationIsComputed"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>
          <button class="btn btn-xs btn-primary"
            ng-click="submitNewMapRelation(newRelationName, newRelationAbbreviation, newRelationTerminologyId, 
        newRelationAllowableForNullTarget, newRelationIsComputed); 
        newRelationName = ''; newRelationAbbreviation = ''; newRelationTerminologyId = '';
        newRelationAllowableForNullTarget = false; newRelationIsComputed = false;">Submit</button>
        </td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>
</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right"
    uib-tooltip="List of the map principles in this application."> Map
    Principles </span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;"
  ng-show="mapPrinciples.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedPrincipleCount"
  items-per-page="pageSize" ng-model="pagePrinciple"
  ng-change="getPagedPrinciples(pagePrinciple, principleFilter)"></uib-pagination>

<span>
  <input type="text" ng-model="principleFilter"
    ng-change="getPagedPrinciples(1, principleFilter)">
  <button class="btn btn-xs btn-warning" ng-click="resetPrincipleFilter()">Reset</button>
</span>

<table class="table pure-table" style="width: 100%; margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 10%;">Id</th>
      <th style="width: 84%;">Principle Name</th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>

  </thead>

  <tbody ng-repeat="principle in pagedPrinciple | orderBy:principleId"
    style="border: 2px solid #ccc;">
    <tr>
      <td>
        <input ng-model="principle.principleId"
          ng-change="setEditingPerformed(principle)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="principle.name"
          ng-change="setEditingPerformed(principle)" style="width: 70%;"></input>
        <input ng-model="principle.sectionRef"
          ng-change="setEditingPerformed(principle)" style="width: 70%;"></input>
        <input ng-model="principle.detail"
          ng-change="setEditingPerformed(principle)" style="width: 100%;"></input>
      </td>
      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updatePrinciple(principle)"
          ng-show="isComponentChanged(principle) == true">Save</button>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete principle">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deletePrinciple(principle)"></i>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedPrinciples()"
  ng-show="principleInEditingPerformed() == true">Cancel Unsaved Edits</button>

<div>
  <div style="margin-top: 15px;">
    <b>Create New Map Principle</b>
  </div>

  <table class="table pure-table" style="margin-bottom: 5px;">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Principle Name</td>
        <td>
          <input id="newPrincipleName" style="width: 100%;" type="text"
            ng-model="newPrincipleName">
        </td>
      </tr>
      <tr>
        <td>Principle Id</td>
        <td>
          <input id="newPrincipleId" style="width: 100%;" type="text"
            ng-model="newPrincipleId">
        </td>
      </tr>
      <tr>
        <td>Principle Detail</td>
        <td>
          <input id="newPrincipleDetail" style="width: 100%;" type="text"
            ng-model="newPrincipleDetail">
        </td>
      </tr>
      <tr>
        <td>Principle Section Ref</td>
        <td>
          <input id="newPrincipleSectionRef" style="width: 100%;" type="text"
            ng-model="newPrincipleSectionRef">
        </td>
      </tr>
      <tr>
        <td>
          <button class="btn btn-xs btn-primary" style="margin-bottom: 15px;"
            ng-click="submitNewMapPrinciple(newPrincipleName, newPrincipleId, newPrincipleDetail, newPrincipleSectionRef);
         newPrincipleName = ''; newPrincipleId = ''; newPrincipleDetail = ''; newPrincipleSectionRef = '';">Submit</button>
        </td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>
<!-- <div style="margin-top:15px;"><b>Upload Map Principle Handbook</b></div>                 
      <div>
        <input type="file" ng-file-select="onFileSelect($files)">
      </div>       --> </uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right"
    uib-tooltip="List of the preset age ranges used for rule construction in this application">
    Preset Age Ranges </span>
</h5>
</uib-accordion-heading>
<table style="width: 100%" class="table pure-table" style="margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 30%;">Name</th>
      <th style="width: 18%;">Lower Bound</th>
      <th style="width: 7%;">Lower Units</th>
      <th style="width: 7%;">Lower Inclusive</th>
      <th style="width: 18%;">Upper Bound</th>
      <th style="width: 7%;">Upper Units</th>
      <th style="width: 7%;">Upper Inclusive</th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>


  <tbody ng-repeat="ageRange in mapAgeRanges | orderBy: 'name'">

    <tr>
      <td>
        <input ng-model="ageRange.name"
          ng-change="setEditingPerformed(ageRange)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="ageRange.lowerValue"
          ng-change="setEditingPerformed(ageRange)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="ageRange.lowerUnits"
          ng-change="setEditingPerformed(ageRange)" style="width: 100%;"></input>
      </td>
      <td>
        <select ng-model="ageRange.lowerInclusive"
          ng-change="setEditingPerformed(ageRange)"
          ng-options="item for item in [true, false]">
        </select>
      </td>
      <td>
        <input ng-model="ageRange.upperValue"
          ng-change="setEditingPerformed(ageRange)" style="width: 100%;"></input>
      </td>
      <td>
        <input ng-model="ageRange.upperUnits"
          ng-change="setEditingPerformed(ageRange)" style="width: 100%;"></input>
      </td>
      <td>
        <select ng-model="ageRange.upperInclusive"
          ng-change="setEditingPerformed(ageRange)"
          ng-options="item for item in [true, false]">
        </select>
      </td>

      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updateAgeRange(ageRange)"
          ng-show="isComponentChanged(ageRange) == true">Save</button>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete age range">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deleteAgeRange(ageRange)"></i>
        </div>
      </td>
      <td></td>
    </tr>
  </tbody>
</table>
<button class="btn btn-xs btn-warning" ng-click="revertUnsavedAgeRanges()"
  ng-show="ageRangeInEditingPerformed() == true">Cancel Unsaved Edits</button>



<div name="ageRangeForm">
  <div style="margin-top: 15px;">
    <b>Create New Map Age Range</b>
  </div>

  <table class="table pure-table">
    <thead>
      <tr>
        <th style="width: 25%;"></th>
        <th style="width: 75%;"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Age Range Name</td>
        <td>
          <input id="newAgeRangeName" type="text" ng-model="newAgeRangeName">
        </td>
      </tr>
      <tr>
        <td>Age Range Lower Value</td>
        <td>
          <input id="newAgeRangeLowerValue" type="text"
            ng-model="newAgeRangeLowerValue">
        </td>
      </tr>
      <tr>
        <td>Age Range Lower Units</td>
        <td>
          <input id="newAgeRangeLowerUnits" type="text"
            ng-model="newAgeRangeLowerUnits">
        </td>
      </tr>
      <tr>
        <td>Age Range Lower Inclusive</td>
        <td>
          <select ng-model="newAgeRangeLowerInclusive"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>Age Range Upper Value</td>
        <td>
          <input id="newAgeRangeUpperValue" type="text"
            ng-model="newAgeRangeUpperValue">
        </td>
      </tr>
      <tr>
        <td>Age Range Upper Units</td>
        <td>
          <input id="newAgeRangeUpperUnits" type="text"
            ng-model="newAgeRangeUpperUnits">
        </td>
      </tr>
      <tr>
        <td>Age Range Upper Inclusive</td>
        <td>
          <select ng-model="newAgeRangeUpperInclusive"
            ng-options="item for item in [true, false]">
          </select>
        </td>
      </tr>
      <tr>
        <td>
          <button class="btn btn-xs btn-primary"
            ng-click="submitNewMapAgeRange(newAgeRangeName, newAgeRangeLowerInclusive, newAgeRangeLowerUnits,
         newAgeRangeLowerValue, newAgeRangeUpperInclusive, newAgeRangeUpperUnits, newAgeRangeUpperValue);
         newAgeRangeName = ''; newAgeRangeLowerInclusive = ''; newAgeRangeLowerUnits = '';
         newAgeRangeLowerValue = ''; newAgeRangeUpperInclusive = ''; newAgeRangeUpperUnits = '';
         newAgeRangeUpperValue = '';">Submit</button>
        </td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>

</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right"
    uib-tooltip="List of the report definitions for the application.">
    Report Definitions</span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;"
  ng-show="reportDefinitions.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedReportDefinitionCount"
  items-per-page="pageSize" ng-model="pageReportDefinition"
  ng-change="getPagedReportDefinitions(pageReportDefinition, reportDefinitionFilter)"></uib-pagination>

<span>
  <input type="text" ng-model="reportDefinitionFilter"
    ng-change="getPagedReportDefinitions(1, reportDefinitionFilter)">
  <button class="btn btn-xs btn-warning"
    ng-click="resetReportDefinitionFilter()">Reset</button>
</span>

<table style="width: 100%" class="table pure-table" style="margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 40%"></th>
      <th style="width: 54%"></th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>

  <tbody ng-repeat="definition in pagedReportDefinition | orderBy: 'name'"
    style="border: 2px solid #ccc;">

    <tr>
      <td style="width: 40%;">

        <table style="width: 100%;" class="table pure-table">
          <thead>
            <tr>
              <th style="width: 40%;">Parameter</th>
              <th style="width: 60%;">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr tooltip-placement="top" uib-tooltip="Name of report definition">
              <td style="width: 40%;">Name</td>
              <td style="width: 60%;">
                <input style="width: 100%;" ng-model="definition.name"
                  ng-change="setEditingPerformed(definition)">
              </td>
            </tr>
            <tr tooltip-placement="top"
              uib-tooltip="Query frequency to calculate report results">
              <td style="width: 40%;">Frequency</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.frequency"
                  ng-options="frequency as frequency for frequency in definitionFrequencies"
                  ng-change="setEditingPerformed(definition)"></select>
              </td>
            </tr>
            <tr tooltip-placement="top"
              uib-tooltip="Project role required to view report results">
              <td style="width: 40%;">Role Required</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.roleRequired"
                  ng-options="role as role for role in definitionRoles"
                  ng-change="setEditingPerformed(definition)"
                  style="width: 100%; padding:5px;"></select>
              </td>
            </tr>
            <tr tooltip-placement="top"
              uib-tooltip="Type of object this report counts">
              <td style="width: 40%;">Result Type</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.resultType"
                  ng-options="resultType as resultType for resultType in definitionResultTypes"
                  ng-change="setEditingPerformed(definition)"
                  style="width: 100%;"></select>
              </td>
            </tr>
            <tr tooltip-placement="top"
              uib-tooltip="Whether this report is a difference report between two other reports">
              <td style="width: 40%;">Is Diff Report?</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.diffReport"
                  ng-options="item for item in [true, false]"
                  ng-change="setEditingPerformed(definition); definition.timePeriod = null;"></select>
              </td>
            </tr>

            <!--  Non-diff-report parameters -->
            <tr ng-show="definition.diffReport == false" tooltip-placement="top"
              uib-tooltip="Query type/engine used to retrieve report results">
              <td style="width: 40%;">Query Type</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.queryType"
                  ng-options="queryType as queryType for queryType in definitionQueryTypes"
                  ng-change="setEditingPerformed(definition); definition.testReportSuccess = false;"></select>
              </td>
            </tr>

            <!--  Diff-report parameters -->
            <tr ng-show="definition.diffReport == true" tooltip-placement="top"
              uib-tooltip="Time period this difference report operates over">
              <td style="width: 40%;">Diff Report Time Period</td>
              <td style="width: 60%;">
                <select style="width: 100%;" ng-model="definition.timePeriod"
                  ng-options="timePeriod as timePeriod for timePeriod in definitionTimePeriods"
                  ng-change="setEditingPerformed(definition)"></select>
              </td>
            </tr>
            <tr ng-show="definition.diffReport == true" tooltip-placement="top"
              uib-tooltip="Report used to calculate difference statistics">
              <td style="width: 40%;">Diff Report Base Definition
              <td style="width: 60%;">
                <select style="width: 100%;"
                  ng-model="definition.diffReportDefinitionName"
                  ng-options="name as name for name in getNonDiffReportDefinitionNames()"
                  ng-change="setEditingPerformed(definition)"></select>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
      <td style="width: 60%;">
        <table style="width: 100%; height: 100%;" class="table pure-table">

          <thead>
            <tr>
              <th style="width: 100%;">Query</th>
            </tr>
          </thead>
          <tbody style="widgth: 100%; height: 100%;">
            <tr style="height: 100%;">
              <td style="height: 100%;">
                <div style="height: 100%;">
                  <textarea
                    ng-show="definition.diffReport == false && definition.queryType != 'NONE'"
                    style="overflow: auto; width: 100%; min-height: 98px"
                    tooltip-placement="top"
                    uib-tooltip="Query executed to retrieve report results"
                    ng-model="definition.query"
                    ng-change="setEditingPerformed(definition); definition.testReportSuccess = false;"></textarea>
                  <div ng-show="definition.diffReport == true"
                    class="alert alert-warning">Query is not specified for
                    difference reports.</div>
                  <div ng-show="definition.queryType === 'NONE'"
                    class="alert alert-warning">Query is not specified
                    when query type is NONE.</div>

                  <div class="alert alert-warning"
                    ng-show="definition.testReportSuccess == false && definition.testReportError == null">
                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    You must test this modified report definition before
                    updating it.
                  </div>
                  <div class="alert alert-success"
                    ng-show="definition.testReportSuccess == true">
                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    Report definition successfully passed test. Click Save to
                    update the report definition, or continue modifications.
                  </div>
                  <div class="alert alert-danger"
                    ng-show="definition.testReportError != null">

                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    {{definition.testReportError}}

                  </div>
                </div>
              </td>
            </tr>
          </tbody>

          <thead style="">
            <tr>
              <th style="border-top: 0px">Description (optional)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <textarea style="overflow: auto; width: 100%;"
                  tooltip-placement="top"
                  uib-tooltip="Description and details regarding report definition"
                  ng-model="definition.description"
                  ng-change="setEditingPerformed(definition);">
											</textarea>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updateReportDefinition(definition)"
          ng-show="isComponentChanged(definition) == true && definition.testReportSuccess != false">Save</button>

        <button class="btn btn-xs btn-primary"
          ng-click="testReportDefinition(definition)"
          ng-show="isComponentChanged(definition) == true && definition.testReportSuccess == false">Test</button>

        <div ng-show="isComponentChanged(definition) == true"
          style="padding-top: 10px;">
          <button class="btn btn-xs btn-warning"
            ng-click="revertUnsavedReportDefinition(definition)">Cancel</button>
        </div>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete report definition">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deleteReportDefinition(definition)"></i>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<button class="btn btn-xs btn-primary"
  ng-click="revertUnsavedReportDefinitions()"
  ng-show="reportDefinitionInEditingPerformed() == true">Revert Unsaved</button>

<!--  second pagination controls for convenience --> <uib-pagination
  ng-show="reportDefinitions.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedReportDefinitionCount"
  items-per-page="pageSize" ng-model="pageReportDefinition"
  ng-change="getPagedReportDefinitions(pageReportDefinition, reportDefinitionFilter)"></uib-pagination>


<div name="reportDefinitionForm">
  <div style="margin-top: 15px;">
    <b>Create New Report Definition</b>
  </div>
  <table style="width: 100%" class="table pure-table"
    style="margin-bottom: 5px;">
    <thead>
      <tr>
        <th style="width: 40%"></th>
        <th style="width: 54%"></th>
      </tr>
    </thead>


    <tbody style="border: 2px solid #ccc;">
      <tr>
        <td style="width: 40%;">
          <table style="width: 100%;" class="table pure-table">
            <thead>
              <tr>
                <th style="width: 40%;">Parameter</th>
                <th style="width: 60%;">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tooltip-placement="top"
                uib-tooltip="Name of report newDefinition">
                <td style="width: 40%;">Name</td>
                <td style="width: 60%;">
                  <input style="width: 100%;" ng-model="newDefinition.name">
                </td>
              </tr>
              <tr tooltip-placement="top"
                uib-tooltip="Query frequency to calculate report results">
                <td style="width: 40%;">Frequency</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-change="newReportAdded = false"
                    ng-model="newDefinition.frequency"
                    ng-options="frequency as frequency for frequency in definitionFrequencies"></select>
                </td>
              </tr>
              <tr tooltip-placement="top"
                uib-tooltip="Project role required to view report results">
                <td style="width: 40%;">Role Required</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.roleRequired"
                    ng-change="newReportAdded = false"
                    ng-options="role as role for role in definitionRoles"
                    style="width: 100%; padding:5px;"></select>
                </td>
              </tr>
              <tr tooltip-placement="top"
                uib-tooltip="Type of object this report counts">
                <td style="width: 40%;">Result Type</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.resultType"
                    ng-change="newReportAdded = false"
                    ng-options="resultType as resultType for resultType in definitionResultTypes"
                    style="width: 100%;"></select>
                </td>
              </tr>
              <tr tooltip-placement="top"
                uib-tooltip="Whether this report is a difference report between two other reports">
                <td style="width: 40%;">Is Diff Report?</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.diffReport"
                    ng-options="item for item in [true, false]"
                    ng-change="newDefinition.testReportSuccess = false; newReportAdded=false"></select>
                </td>
              </tr>

              <!--  Non-diff-report parameters -->
              <tr ng-show="newDefinition.diffReport == false"
                tooltip-placement="top"
                uib-tooltip="Query type/engine used to retrieve report results">
                <td style="width: 40%;">Query Type</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.queryType"
                    ng-change="newDefinition.testReportSuccess = false; newReportAdded = false;"
                    ng-options="queryType as queryType for queryType in definitionQueryTypes"></select>
                </td>
              </tr>

              <!--  Diff-report parameters -->
              <tr ng-show="newDefinition.diffReport == true"
                tooltip-placement="top"
                uib-tooltip="Time period this difference report operates over">
                <td style="width: 40%;">Diff Report Time Period</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.timePeriod"
                    ng-options="timePeriod as timePeriod for timePeriod in definitionTimePeriods"></select>
                </td>
              </tr>
              <tr ng-show="newDefinition.diffReport == true"
                tooltip-placement="top"
                uib-tooltip="Report used to calculate difference statistics">
                <td style="width: 40%;">Diff Report Base Definition
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newDefinition.diffReportDefinitionName"
                    ng-change="newReportAdded = false"
                    ng-options="name as name for name in getNonDiffReportDefinitionNames()"></select>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td style="width: 60%;">
          <table style="width: 100%; height: 100%;" class="table pure-table">

            <thead>
              <tr>
                <th style="width: 100%;">Query</th>

              </tr>
            </thead>
            <tbody style="widgth: 100%; height: 100%;">
              <tr style="height: 100%;">
                <td style="height: 100%;">
                  <div style="height: 100%;">
                    <textarea
                      ng-show="newDefinition.diffReport == false && newDefinition.queryType != 'NONE'"
                      style="overflow: auto; width: 100%; min-height: 170px"
                      tooltip-placement="top"
                      uib-tooltip="Query executed to retrieve report results"
                      ng-model="newDefinition.query"
                      ng-change="newDefinition.testReportSuccess = false; newReportAdded = false"></textarea>
                    <div ng-show="newDefinition.diffReport == true"
                      class="alert alert-warning">Query is not specified
                      for difference reports.</div>
                    <div ng-show="newDefinition.queryType === 'NONE'"
                      class="alert alert-warning">Query is not specified
                      when query type is NONE.</div>
                  </div>

                </td>
              </tr>
            </tbody>
          </table>
          <table class="table">
            <thead>
              <tr>
                <th>Description (optional)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <textarea style="overflow: auto; width: 100%;"
                    tooltip-placement="top"
                    uib-tooltip="Description and details regarding report"
                    ng-model="newDefinition.description"
                    ng-change="newReportAdded = false;">
											</textarea>
                </td>
              </tr>
            </tbody>
          </table>
        </td>

      </tr>
      <tr>
        <td>
          <!-- show submit button only if diff report OR the query has passed test
						 Note that width is formally set due to ng-disabled resizing disabled buttons -->
          <button
            ng-disabled="newDefinition.testReportSuccess != true && newDefinition.diffReport == false"
            class="btn btn-xs btn-primary" style="width: 59px"
            ng-click="submitNewReportDefinition(newDefinition); newDefinition = {};">Submit</button>

          <button ng-disabled="newDefinition.testReportSuccess == true"
            ng-show="newDefinition.diffReport == false"
            class="btn btn-xs btn-primary" style="width: 41px"
            ng-click="testReportDefinition(newDefinition); newReportAdded = false;">Test</button>


        </td>

        <td>
          <div class="alert alert-success" ng-show="newReportAdded == true">
            Report definition succcessfully added.</div>
          <div class="border-error alert-error"
            ng-show="newDefinition.testReportError != null">
            <div class="alert alert-danger alert-error">
              {{newDefinition.testReportError}}</div>
          </div>
          <div ng-show="newDefinition.testReportSuccess == true"
            class="alert alert-success ">Query successfully passed checks.
            Click Submit to add the report definition.</div>
          <div class="alert alert-warning"
            ng-show="newDefinition.testReportSuccess == false && newDefinition.testReportError == null && newDefinition.diffReport == false">You
            must test this query before submitting it.</div>
        </td>
      </tr>

    </tbody>
  </table>
</div>
</uib-accordion-group> <uib-accordion-group> <uib-accordion-heading>
<h5>
  <span tooltip-placement="right"
    uib-tooltip="List of the QA check definitions for the application.">
    QA Check Definitions</span>
</h5>
</uib-accordion-heading> <uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;"
  first-text="&laquo;" last-text="&raquo;"
  ng-show="qaCheckDefinitions.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedQaDefinitionCount"
  items-per-page="pageSize" ng-model="pageQaDefinition"
  ng-change="getPagedQaDefinitions(pageQaDefinition, qaCheckDefinitionFilter)"></uib-pagination>

<span>
  <input type="text" ng-model="qaCheckDefinitionFilter"
    ng-change="getPagedQaDefinitions(1, qaCheckDefinitionFilter)">
  <button class="btn btn-xs btn-warning" ng-click="resetQaDefinitionFilter()">Reset</button>
</span>

<table style="width: 100%" class="table pure-table" style="margin-bottom: 5px;">
  <thead>
    <tr>
      <th style="width: 40%">Parameters</th>
      <th style="width: 54%">QA Check Query</th>
      <th style="width: 3%;"></th>
      <th style="width: 3%;"></th>
    </tr>
  </thead>


  <tbody ng-repeat="definition in pagedQaDefinition | orderBy: 'name'"
    style="border: 2px solid #ccc;">

    <tr>

      <td style="width: 40%;">

        <table style="width: 100%;" class="table pure-table">

          <thead>
            <tr>
              <th style="width: 40%;">Parameter</th>
              <th style="width: 60%;">Value</th>
            </tr>
          </thead>
          <tr tooltip-placement="top" uib-tooltip="QA Check Name">
            <td style="width: 40%">Name
            <td style="width: 60%;">
              <input style="width: 100%;" ng-model="definition.name"
                ng-change="setEditingPerformed(definition)">
            </td>
          </tr>
          <tr tooltip-placement="top"
            uib-tooltip="Project role required to view qa check results">
            <td style="width: 40%;">Role Required</td>
            <td style="width: 60%;">
              <select style="width: 100%;" ng-model="definition.roleRequired"
                ng-options="role as role for role in definitionRoles"
                ng-change="setEditingPerformed(definition)"
                style="width: 100%; padding:5px;"></select>
            </td>
          </tr>
          <tr tooltip-placement="top"
            uib-tooltip="Type of object this qa check counts">
            <td style="width: 40%;">Result Type</td>
            <td style="width: 60%;">
              <select style="width: 100%;" ng-model="definition.resultType"
                ng-options="resultType as resultType for resultType in definitionResultTypes"
                ng-change="setEditingPerformed(definition)" style="width: 100%;"></select>
            </td>
          </tr>
          <tr tooltip-placement="top"
            uib-tooltip="Query type/engine used to retrieve qa check results">
            <td style="width: 40%;">Query Type</td>
            <td style="width: 60%;">
              <select style="width: 100%;" ng-model="definition.queryType"
                ng-options="queryType as queryType for queryType in definitionQueryTypes"
                ng-change="setEditingPerformed(definition); definition.testQaSuccess = false; definition.testQaError = null"
                style="width: 100%;"></select>
            </td>
          </tr>
          </tbody>
        </table>
      </td>
      <td style="width: 60%;">
        <table style="width: 100%; height: 100%;" class="table pure-table">

          <thead>
            <tr>
              <th style="width: 100%;">Query</th>

            </tr>
          </thead>
          <tbody style="widgth: 100%; height: 100%;">
            <tr style="height: 100%;">
              <td style="height: 100%;">
                <div style="height: 100%;">
                  <textarea ng-show="definition.queryType != 'NONE'"
                    style="overflow: auto; width: 100%; min-height: 98px"
                    tooltip-placement="top"
                    uib-tooltip="Query executed to retrieve report results"
                    ng-model="definition.query"
                    ng-change="setEditingPerformed(definition); definition.testQaSuccess = false"></textarea>

                  <div ng-show="definition.queryType === 'NONE'"
                    class="alert alert-danger">QA Check cannot have query
                    type of NONE.</div>

                  <div class="alert alert-warning"
                    ng-show="definition.queryType != 'NONE' && definition.testQaSuccess == false && definition.testQaError == null">
                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    You must test this modified QA check before updating it.
                  </div>
                  <div class="alert alert-success"
                    ng-show="definition.testQaSuccess == true">
                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    QA check successfully passed test. Click Save to update the
                    report definition, or continue modifications.
                  </div>
                  <div class="alert alert-danger"
                    ng-show="definition.testQaError != null">

                    <i class="glyphicon glyphicon-exclamation-sign"></i>
                    {{definition.testQaError}}

                  </div>

                </div>

              </td>
            </tr>
          </tbody>
          <thead style="">
            <tr>
              <th style="border-top: 0px">Description (optional)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <textarea style="overflow: auto; width: 100%;"
                  tooltip-placement="top"
                  uib-tooltip="Description and details regarding report"
                  ng-model="definition.description"
                  ng-change="setEditingPerformed(definition);">
											</textarea>
              </td>
            </tr>
          </tbody>
        </table>
      </td>

      <td>
        <button class="btn btn-xs btn-primary"
          ng-click="updateQaDefinition(definition)"
          ng-show="isComponentChanged(definition) == true && definition.testQaSuccess != false">Save</button>

        <button class="btn btn-xs btn-primary"
          ng-click="testQaDefinition(definition)"
          ng-show="isComponentChanged(definition) == true && definition.testQaSuccess == false && definition.queryType != 'NONE'">Test</button>
        <div ng-show="isComponentChanged(definition) == true"
          style="padding-top: 10px;">
          <button class="btn btn-xs btn-warning"
            ng-click="revertUnsavedReportDefinition(definition)">Cancel</button>
        </div>
      </td>

      <td>
        <div tooltip-placement="top" title="Delete qa check definition">
          <i class="noul glyphicon glyphicon-remove"
            ng-click="deleteQaDefinition(definition)"></i>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<button class="btn btn-xs btn-primary" ng-click="revertUnsavedQaDefinitions()"
  ng-show="qaCheckDefinitionInEditingPerformed() == true">Revert
  Unsaved</button>

<!--  second pagination controls for convenience --> <uib-pagination
  ng-show="qaCheckDefinitions.length > pageSize" direction-links="false"
  boundary-links="true" total-items="pagedQaDefinitionCount"
  items-per-page="pageSize" ng-model="pageQaDefinition"
  ng-change="getPagedQaDefinitions(pageQaDefinition, qaCheckDefinitionFilter)"></uib-pagination>


<div name="qaDefinitionForm">
  <div style="margin-top: 15px;">
    <b>Create New QA Check</b>
  </div>
  <table style="width: 100%" class="table pure-table"
    style="margin-bottom: 5px;">
    <thead>
      <tr>
        <th style="width: 40%"></th>
        <th style="width: 54%"></th>
      </tr>
    </thead>

    <tbody style="border: 2px solid #ccc;">
      <tr>
        <td style="width: 40%;">
          <table style="width: 100%;" class="table pure-table">
            <thead>
              <tr>
                <th style="width: 40%;">Parameter</th>
                <th style="width: 60%;">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr tooltip-placement="top" uib-tooltip="Name of qa check">
                <td style="width: 40%;">Name</td>
                <td style="width: 60%;">
                  <input style="width: 100%;" ng-model="newQaDefinition.name"
                    ng-change="newQaReportAdded = false;">
                </td>
              </tr>

              <tr tooltip-placement="top"
                uib-tooltip="Project role required to view report results">
                <td style="width: 40%;">Role Required</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newQaDefinition.roleRequired"
                    ng-change="newQaReportAdded = false;"
                    ng-options="role as role for role in definitionRoles"
                    style="width: 100%; padding:5px;"></select>
                </td>
              </tr>
              <tr tooltip-placement="top"
                uib-tooltip="Type of object this report counts">
                <td style="width: 40%;">Result Type</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newQaDefinition.resultType"
                    ng-change="newQaReportAdded = false;"
                    ng-options="resultType as resultType for resultType in definitionResultTypes"
                    style="width: 100%;"></select>
                </td>
              </tr>

              <tr tooltip-placement="top"
                uib-tooltip="Query type/engine used to retrieve report results">
                <td style="width: 40%;">Query Type</td>
                <td style="width: 60%;">
                  <select style="width: 100%;"
                    ng-model="newQaDefinition.queryType"
                    ng-change="newQaDefinition.testReportSuccess = false; newQaReportAdded = false;"
                    ng-options="queryType as queryType for queryType in definitionQueryTypes"></select>
                </td>
              </tr>

            </tbody>
          </table>

        </td>
        <td style="width: 60%;">
          <table style="width: 100%; height: 100%;" class="table pure-table">

            <thead>
              <tr>
                <th style="width: 100%;">Query</th>

              </tr>
            </thead>
            <tbody style="widgth: 100%; height: 100%;">
              <tr style="height: 100%;">
                <td style="height: 100%;">
                  <div style="height: 100%;">
                    <textarea
                      style="overflow: auto; width: 100%; min-height: 170px"
                      tooltip-placement="top"
                      uib-tooltip="Query executed to retrieve report results"
                      ng-model="newQaDefinition.query"
                      ng-change="newQaDefinition.testReportSuccess = false; newQaReportAdded = false;"></textarea>

                  </div>

                </td>
              </tr>
            </tbody>
          </table>
          <table class="table">
            <thead>
              <tr>
                <th>Description (optional)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <textarea style="overflow: auto; width: 100%;"
                    tooltip-placement="top"
                    uib-tooltip="Description and details regarding report"
                    ng-model="newQaDefinition.description"
                    ng-change="newQaReportAdded = false"></textarea>
                </td>
              </tr>
            </tbody>
          </table>
        </td>

      </tr>
      <tr>
        <td>
          <!-- show submit button only if diff report OR the query has passed test
						 Note that width is formally set due to ng-disabled resizing disabled buttons -->
          <button ng-disabled="newQaDefinition.testQaSuccess != true"
            class="btn btn-xs btn-primary" style="width: 59px"
            ng-click="submitNewQaDefinition(newQaDefinition); newQaDefinition = {};">Submit</button>

          <button ng-disabled="newQaDefinition.testQaSuccess == true"
            class="btn btn-xs btn-primary" style="width: 40px"
            ng-click="testQaDefinition(newQaDefinition)">Test</button>


        </td>

        <td>
          <div class="alert alert-success" ng-show="newQaReportAdded == true">
            QA Check definition succcessfully added.</div>
          <div ng-show="newQaDefinition.queryType === 'NONE'"
            class="alert alert-danger">QA Check cannot have query type of
            NONE.</div>

          <div class="alert alert-warning"
            ng-show="newQaDefinition.testQaSuccess == false && newQaDefinition.testQaError == null">
            <i class="glyphicon glyphicon-exclamation-sign"></i>
            You must test this modified QA check before updating it.
          </div>
          <div class="alert alert-success"
            ng-show="newQaDefinition.testQaSuccess == true">
            <i class="glyphicon glyphicon-exclamation-sign"></i>
            QA check successfully passed test. Click Save to update the report
            newQaDefinition, or continue modifications.
          </div>
          <div class="alert alert-danger"
            ng-show="newQaDefinition.testQaError != null">

            <i class="glyphicon glyphicon-exclamation-sign"></i>
            {{newQaDefinition.testQaError}}

          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

</uib-accordion-group></uib-accordion>
