<div
	style="float: left; width: 40%; padding: 10px; border-right: thin solid #ddd;">

	<form>
		<table>
			<tr>
				<td style="padding: 5px;">Report Type:</td>
				<td style="padding: 5px;"><select id="reportSearch"
					ng-options="definition as definition.name for definition in definitions |  filter: {qacheck:false}"
					ng-change="getReports(1, selectedDefinition, queryReport)"
					ng-model="selectedDefinition"></select>
				<td style="padding: 5px">
					<button class="btn btn-sm btn-primary"
						ng-click="getReports(1, null, queryReport); selectedDefinition = null;">Reset</button>
					<button ng-show="selectedDefinition != null"
						ng-click="generateNewReport(selectedDefinition)"
						class="btn btn-sm btn-primary">Generate</button>
				</td>
			</tr>
		</table>
	</form>

	<pagination ng-show="nReportPages > 1" total-items="nReports"
		page="reportPage" max-size="5" class="pagination-sm"
		boundary-links="true" rotate="true" num-pages="nReportPages"
		on-select-page="getReports(page, selectedDefinition, queryReport)"></pagination>

	<div ng-show="nReports != 0">

		<table class="table"">

			<thead>
				<tr>
					<th style="width: 70%; padding: 5px;">Name</th>
					<th style="width: 30%; padding: 5px;">Date</th>

				</tr>

			</thead>

			<tbody>

				<tr ng-repeat="report in reports">


					<td style="width: 70%; padding: 5px;"><a
						ng-show="report.id != reportDisplayed.id"
						ng-click="viewReport(report)">{{report.name}}</a> <span
						ng-show="report.id == reportDisplayed.id">{{report.name}}</span></td>
					<td style="width: 30%; padding: 5px;">{{report.timestamp |
						date: 'MM/dd/yyyy'}}</td>
			</tbody>

		</table>
	</div>
</div>

<div>
	<div style="float: right; width: 60%; padding: 10px">

		<div class="alert alert-warning" ng-show="reportDisplayed == null">
			No report selected</div>

		<div ng-show="reportDisplayed != null">

			<div>
				<strong>Report:</strong> {{reportDisplayed.name}}, run
				{{reportDisplayed.timestamp | date: 'MM/dd/yyyy'}} <span
					ng-show="reportDisplayed.autoGenerated == false">by
					{{reportDisplayed.owner.name}}</span> <span
					ng-show="reportDisplayed.autoGenerated == true">(Auto-generated)</span>
			</div>
			
			<table class="table">
				<thead>
					<th style="width: 3%;"></th>
					<th style="width: 15%";>Count</th>
					<th>Value</th>
				</thead>
				<tbody>
					<tr ng-repeat="result in reportDisplayed.results">
						<td><a ng-click="toggleResultItems(result, result.page)">
								[<i
								ng-class="{'glyphicon-minus': !result.isCollapsed, 'glyphicon-plus': result.isCollapsed}"></i>]
						</a></td>
						<td>{{result.ct}}</td>
						<td>{{result.value}}

							<div ng-show="!result.isCollapsed">

								<table class="table">
									<pagination ng-show="result.nPages > 1" total-items="result.ct"
										page="result.page" max-size="5" class="pagination-sm"
										boundary-links="true" rotate="true" num-pages="result.nPages"
										on-select-page="getResultItems(result, page)"></pagination>
									<thead>
										<th>Id</th>
										<th>Name</th>
									</thead>
									<tbody>
										<tr ng-repeat="item in result.reportResultItems">
											<td><a
												ng-href="{{'index.html#/record/conceptId/' + item.itemId}}"
												target="_blank">{{item.itemId}}</a></td>
											<td>{{item.itemName}}</td>
									</tbody>
								</table>
							</div>
						</td>
				</tbody>
			</table>
			
			<button class="btn btn-sm btn-primary">Export</button>
      <button ng-show="reportDisplayed.id == null"
        class="btn btn-sm btn-primary">Save Report</button>
		</div>



	</div>
</div>