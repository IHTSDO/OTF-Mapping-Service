
<h3>
  {{focusProject.name}} &nbsp
  <button class="btn btn-sm btn-primary" ng-click="goMapRecords()">Map
    Records</button>
</h3>
<p></p>


  <accordion close-others="false"> <accordion-group is-open="true">
  <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the details for this project.">
        Map Project Details
      </span></h5>
  </accordion-heading>

  <p></p>
  <table class="table table-bordered" cellpadding=5>
    <tbody>
      <tr>
        <td width="18%"><div tooltip-placement="right"
        tooltip="Abbreviation and version information for the terminology this map project is mapping from.">
        <b>Source Terminology</b>
      </div></td>
        <td width="82%">{{focusProject.sourceTerminology}},
      {{focusProject.sourceTerminologyVersion}}</td>
      </tr>
      <tr>
        <td width="18%"><div tooltip-placement="right"
        tooltip="Abbreviation and version information for the terminology this map project is mapping to.">
        <b>Destination Terminology</b>
      </div></td>
        <td width="82%">{{focusProject.destinationTerminology}},
      {{focusProject.destinationTerminologyVersion}}</td>
      </tr>
      <tr>
        <td width="18%"><div tooltip-placement="right"
        tooltip="The RF2 metadata concept identifier and preferred name representing this map project.">
        <b>Ref Set</b>
      </div></td>
        <td width="82%">{{focusProject.refSetName}}, {{focusProject.refSetId}}</td>
      </tr>
        <tr>
    <td><div tooltip-placement="right"
        tooltip="A true/false indicator of whether this mapping data has been published.">
        <b>Published</b>
      </div></td>
    <td>{{focusProject.published}}</td>
  </tr>
  <tr>
    <td><div tooltip-placement="right"
        tooltip="A true/false indicator of whether this map project has multiple mappings for the same source concept.">
        <b>Group Structure</b>
      </div></td>
    <td>{{focusProject.groupStructure}}</td>
  </tr>
  <tr>
    <td><div tooltip-placement="right"
        tooltip="A true/false indicator of whether this map project uses rules other than TRUE">
        <b>Rule Based</b>
      </div></td>
    <td>{{focusProject.ruleBased}}</td>
  </tr>
  <tr>
    <td><div tooltip-placement="right"
        tooltip="The method by which this project uses the map relation (e.g. map record based, relationship based)">
        <b>Relation Style</b>
      </div></td>
    <td>{{mapRelationStyleText}}</td>
  </tr>
  <tr>
    <td><div tooltip-placement="right"
        tooltip="The type of mapping this project uses (i.e.. simple, complex, extended)">
        <b>Map Type</b>
      </div></td>
    <td>{{focusProject.mapRefsetPattern}}</td>
  </tr>
    </tbody>
  </table>
  <p></p>
  </accordion-group>
  <accordion-group ng-show="focusProject.mapLead.length > 0">
    <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map leads for this project.">
        Map Leads
      </span></h5>
  </accordion-heading>
    <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 30%;">User</th>
            <th style="width: 20%;">User Name</th>
            <th style="width: 50%;">Email</th>
          </tr>
        </thead>
        <tbody ng-repeat="lead in focusProject.mapLead"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{lead.name}}</td>
            <td>{{lead.userName}}</td>
            <td ng-show="isEmailViewable(lead.email)">{{lead.email}}</td>
            <td ng-show="isEmailViewable(lead.email) == false">Private email</td>
          </tr>
        </tbody>
      </table>
  </accordion-group>
  <accordion-group ng-show="focusProject.mapSpecialist.length > 0">
    <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map specialists for this project.">
        Map Specialists
      </span></h5>
  </accordion-heading>
  <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 30%;">User</th>
            <th style="width: 20%;">User Name</th>
            <th style="width: 50%;">Email</th>
          </tr>
        </thead>
        <tbody ng-repeat="specialist in focusProject.mapSpecialist"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{specialist.name}}</td>
            <td>{{specialist.userName}}</td>
            <td ng-show="isEmailViewable(specialist.email)">{{specialist.email}}</td>
            <td ng-show="isEmailViewable(specialist.email) == false">Private email</td>
          </tr>
        </tbody>
      </table>
  </accordion-group>
    <accordion-group ng-show="focusProject.mapAdministrators.length > 0">
    <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map administrators for this project.">
        Map Administrators
      </span></h5>
  </accordion-heading>
    <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 30%;">User</th>
            <th style="width: 20%;">User Name</th>
            <th style="width: 50%;">Email</th>
          </tr>
        </thead>
        <tbody ng-repeat="admin in focusProject.mapAdministrators"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{admin.name}}</td>
            <td>{{admin.userName}}</td>
            <td ng-show="isEmailViewable(admin.email)">{{admin.email}}</td>
            <td ng-show="isEmailViewable(admin.email) == false">Private email</td>
          </tr>
        </tbody>
      </table>
  </accordion-group>
  <accordion-group ng-show="focusProject.mapAdvice.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map advice for this project.">
        Map Advices
      </span></h5>
  </accordion-heading>
  
    <pagination direction-links="false" boundary-links="true"
        total-items="pagedAdviceCount" items-per-page="pageSize"
        page="pageAdvice" on-select-page="getPagedAdvices(page)"></pagination>
      <form>
        <input type="text" ng-model="adviceFilter"
          ng-change="getPagedAdvices(1)"> <input type="submit"
          value="Reset Filter" ng-click="resetAdviceFilter()">
      </form>

      <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th>Advice</th>
            <th><div tooltip-placement="top"
                tooltip="Whether this advice can be applied to entries with no target">Allowable
                for Null Target</div>
            </td>
            <th><div tooltip-placement="top"
                tooltip="If true, this advice is applied automatically and cannot be assigned directly by the user">Computed</div>
            </td>
            </th>
          </tr>
        </thead>
        <tbody ng-repeat="advice in pagedAdvice | orderBy: 'name'"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{advice.name}}</td>
            <td>{{advice.isAllowableForNullTarget}}</td>
            <td>{{advice.isComputed}}</td>
          </tr>

        </tbody>
      </table>
  </accordion-group>  
  <accordion-group ng-show="focusProject.mapRelation.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map relations for this project.">
        Map Relations
      </span></h5>
  </accordion-heading>
  
<pagination ng-show="focusProject.mapRelation.length > pageSize"
        direction-links="false" boundary-links="true"
        total-items="pagedRelationCount" items-per-page="pageSize"
        page="pageRelation" on-select-page="getPagedRelations(page)"></pagination>
      <form>
        <input type="text" ng-model="relationFilter"
          ng-change="getPagedRelations(1)"> <input type="submit"
          value="Reset Filter" ng-click="resetRelationFilter()">
      </form>

      <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th>Id</th>
            <th><div tooltip-placement="top"
                tooltip="Short code abbreviation for this relation, if applicable">Code</div>
            </td>
            <th><div tooltip-placement="top"
                tooltip="The full name of this map relation">Name</div>
            </td>
            <th><div tooltip-placement="top"
                tooltip="Whether this relation can be applied to entries with no target">Allowable
                for Null Target</div>
            </td>
            <th><div tooltip-placement="top"
                tooltip="If true, this relation is applied automatically and cannot be assigned directly by the user">Computed</div>
            </td>
          </tr>
        </thead>
        <tbody ng-repeat="relation in pagedRelation | orderBy: 'name'"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{relation.terminologyId}}</td>
            <td><span ng-show="relation.abbreviation != 'none'">{{relation.abbreviation}}</span></td>
            <td>{{relation.name}}</td>
            <td>{{relation.isAllowableForNullTarget}}</td>
            <td>{{relation.isComputed}}</td>
          </tr>

        </tbody>
      </table>
  </accordion-group>  
    <accordion-group ng-show="focusProject.mapPrinciple.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the map principles for this project.">
        Map Principles
      </span></h5>
  </accordion-heading>
  <pagination ng-show="focusProject.mapPrinciple.length > pageSize"
        direction-links="false" boundary-links="true"
        total-items="pagedPrincipleCount" items-per-page="pageSize"
        page="pagePrinciple" on-select-page="getPagedPrinciples(page)"></pagination>
      <form>
        <input type="text" ng-model="principleFilter"
          ng-change="getPagedPrinciples(1)"> <input type="submit"
          value="Reset Filter" ng-click="resetPrincipleFilter()">
      </form>

      <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 10%;">Id</th>
            <th style="width: 90%;">Principle Name</th>
          </tr>

        </thead>

        <tbody ng-repeat="principle in pagedPrinciple | orderBy:principleId"
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{principle.principleId}}</td>
            <td>
              <div class="dropdown">
                <a class="dropdown-toggle"> 
                <i class="glyphicon glyphicon-info-sign"></i>
                </a> &nbsp {{principle.name}} <span class="dropdown-menu">
                  <p>Reference: {{principle.sectionRef}}</p>
                  <p ng-bind-html="to_trusted(principle.detail)"></p>
                </span>
              </div>
            </td>
          </tr>
        </tbody>

      </table>
      <div ng-show="focusProject.mapPrincipleSourceDocument != null">
        Principles taken from <a
          href="doc/{{focusProject.mapPrincipleSourceDocument}}" target="_blank">Map
          Principles Document</a>
      </div>
  </accordion-group>
    <accordion-group ng-show="focusProject.mapAgeRange.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the preset age ranges used for rule construction for this project.">
        Preset Age Ranges
      </span></h5>
  </accordion-heading> 
  <table width="100%" class="table pure-table"" >
        <thead>
          <tr>
            <th style="width: 30%;">Name</th>
            <th style="width: 35%;">Lower Bound</th>
            <th style="width: 35%;">Upper Bound</th>
          </tr>
        </thead>


        <tbody
          ng-repeat="ageRange in focusProject.mapAgeRange | orderBy: 'name'">

          <tr>
            <td>{{ageRange.name}}</td>
            <td>
              <div ng-show="ageRange.lowerValue != '-1'">
                <span
                  ng-show="ageRange.lowerInclusive == true && ageRange.lowerValue != null">≥</span>
                <span
                  ng-show="ageRange.lowerInclusive == false && ageRange.lowerValue != null">></span>

                {{ageRange.lowerValue}} {{ageRange.lowerUnits}}
              </div>
            </td>
            <td>

              <div ng-show="ageRange.upperValue != '-1'">

                <span
                  ng-show="ageRange.upperInclusive == true && ageRange.upperValue != null">≤</span>
                <span
                  ng-show="ageRange.upperInclusive == false && ageRange.upperValue != null"><</span>

                {{ageRange.upperValue}} {{ageRange.upperUnits}}
              </div>
            </td>
          </tr>
        </tbody>

      </table>
      </accordion-group> 
          <accordion-group ng-show="focusProject.scopeConcepts.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the concepts in scope for this project.">
        Scope Concepts
      </span></h5>
  </accordion-heading> 
  <pagination direction-links="false" boundary-links="true"
        total-items="pagedScopeConceptCount" items-per-page="pageSize"
        max-size="maxSize" page="pageScopeConcept"
        on-select-page="getPagedScopeConcepts(page)"></pagination> <!-- <form>
      <input type="text" ng-model="scopeConceptFilter" ng-change="getPagedScopeConcepts(1)">
      <input type="submit" value="Reset Filter" ng-click="resetScopeConceptFilter()">
    </form>  -->

      <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 50%;">Scope Included Concepts</th>
            <th style="width: 50%;">Default Preferred Name</th>
          </tr>
        </thead>
        <tbody ng-repeat="scopeConcept in pagedScopeConcept "
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{scopeConcept}}</td>
            <td>{{scopeMap[scopeConcept]}}</td>
          </tr>

        </tbody>



      </table>
      <div ng-show="focusProject.scopeDescendantsFlag == true">Scope
        Descendants Included</div>
      <div ng-show="focusProject.scopeDescendantsFlag == false">Scope
        Descendants Not Included</div>
  </accordion-group>
      <accordion-group ng-show="focusProject.scopeExcludedConcepts.length > 0">
      <accordion-heading>
  <h5><span tooltip-placement="right"
        tooltip="List of the concepts excluded from scope for this project.">
        Scope Excluded Concepts
      </span></h5>
  </accordion-heading> 
  <pagination direction-links="false" boundary-links="true"
        total-items="pagedScopeExcludedConceptCount" items-per-page="pageSize"
        max-size="maxSize" page="pageScopeExcludedConcept"
        on-select-page="getPagedScopeExcludedConcepts(page)"></pagination> <!--<form>
      <input type="text" ng-model="scopeExcludedConceptFilter" ng-change="getPagedScopeExcludedConcepts(1)">
      <input type="submit" value="Reset Filter" ng-click="resetScopeExcludedConceptFilter()">
    </form>  -->

      <table width="100%" class="table pure-table">
        <thead>
          <tr>
            <th style="width: 50%;">Scope Excluded Concepts</th>
            <th style="width: 50%;">Default Preferred Name</th>
          </tr>
        </thead>
        <tbody ng-repeat="scopeExcludedConcept in pagedScopeExcludedConcept "
          style="border: 2px solid #ccc;">
          <tr>
            <td>{{scopeExcludedConcept}}</td>
            <td>{{scopeExcludedMap[scopeExcludedConcept]}}</td>
          </tr>

        </tbody>


      </table>
      <div ng-show="focusProject.scopeExcludedDescendantsFlag == true">
        Scope Descendants Included</div>
      <div ng-show="focusProject.scopeExcludedDescendantsFlag == false">
        Scope Descendants Not Included</div>
  </accordion-group>
   </accordion>
