<!--  partial for displaying records -->

<p></p>

<a href="#/project/id/{{project.id}}"><h3>{{project.name}}</h3></a>
<p></p>

<p>{{errorRecords}} </p>
 
<p><form><input ng-model="query"><input type="submit" value="Search" ng-click="retrieveRecords(1)"></form>

<table width="100%" class="table" >
<thead>
	<tr> 
        <th style="width: 5%;"></th>
		<th style="width: 10%;">Concept</th>
		<th style="width: 18%;">Concept Name</th>
        <th style="width: 8%;">Group Id</th>
        <th style="width: 10%;">Map Priority</th>
        <th style="width: 13%;">Rule</th>
		<th style="width: 10%;">Target</th>
		<th style="width: 18%;">Target Name</th>
	</tr>
</thead>

<tbody ng-repeat="record in records" style="border: 2px solid #ccc;" >

	<tr ng-repeat = "entry in record.mapEntry" >
		
        <td><div style="inline-block" ng-show="record.mapNote.length > 0">
          <div class="dropdown">
            <a class="dropdown-toggle"> 
            <img src="img/notepad.png" alt="notepad icon">
            </a>
            <ul class="dropdown-menu">
              <b>Note View</b>
              <li ng-repeat="note in record.mapNote"><a>{{note.note}}</a></li>
            </ul>
          </div>
        </div>
        <div style="inline-block" ng-show="entry.mapAdvice.length > 0">
          <div class="dropdown">
            <a class="dropdown-toggle"> 
            <img src="img/dialog-question.png" alt="question icon">
            </a>
            <ul class="dropdown-menu">
              <b>Advice View</b>
              <li ng-repeat="advice in entry.mapAdvice"><a>{{advice.detail}}</a></li>
            </ul>
          </div>
        </div>
        <div style="inline-block" ng-show="record.unmappedDescendants.length > 0">
          <div class="dropdown">
            <a class="dropdown-toggle"> 
            <img src="img/warning.png" alt="question icon">
            </a>
            <ul class="dropdown-menu">
              <b>Unmapped Descendants</b>
              <li ng-repeat="concept in record.unmappedDescendants"><a href="#/record/conceptId/{{concept.terminologyId}}">{{concept.terminologyId}}: {{concept.value}}</a></li>
            </ul>
          </div>
        </div>
         
        </td>
        <td><a href="#/record/conceptId/{{record.conceptId}}">{{record.conceptId}}</a></td>
		<td>{{record.conceptName}}</td>
        <td>{{entry.mapGroup}}</td>
        <td>{{entry.mapPriority}}</td>
        <td>{{entry.rule}}</td>
		<td>{{entry.targetId}}</td>
		<td>{{entry.targetName}}</td>
        
        
  </tr>

</tbody>

<pagination total-items="nRecords" page="recordPage" max-size="recordsPerPage" class="pagination-sm" 
			boundary-links="true" rotate="true" num-pages="numRecordPages"
			on-select-page="retrieveRecords(page)"></pagination>
</table>

<p ng-show="unmappedDescendantsPresent"><img src="img/warning.png" alt="Unmapped Descendant Warning"> = This concept has unmapped descendants.</p>
<p ng-show="mapNotesPresent"><img src="img/notepad.png" alt="Note(s) Present"> = This entry has notes.</p>
<p ng-show="mapAdvicesPresent"><img src="img/dialog-question.png" alt="Advice(s) Present"> = This entry has advices.</p>






